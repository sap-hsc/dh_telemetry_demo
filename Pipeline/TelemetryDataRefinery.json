{"properties":{},"description":"","processes":{"sapvoraclient1":{"component":"com.sap.vora.client","metadata":{"label":"SAP Vora Client","x":184,"y":12,"height":80,"width":120,"config":{"dsn":"v2://dqp:50000/?binary=true"}}},"constantgenerator1":{"component":"com.sap.util.constantGenerator","metadata":{"label":"Constant Generator","x":16,"y":12,"height":80,"width":120,"extensible":true,"config":{"mode":"once","duration":"2s","counter":0,"content":"select \"_MessageGateway_TimeISO8601\" ,\"value\".\"speed\",  \"value\".\"battery\", \"value\".\"rank\", \"value\".\"user\", \"value\".\"id\"  from \"VORA\".\"CAR_TELEMETRY_COLLECTION\" where \"deviceType\"='AnkiCar'and \"param\"='status' and \"_MessageGateway_TimeISO8601\" IS NOT MISSING limit 100000"}}},"javascriptoperator2":{"component":"com.sap.system.jsengine","metadata":{"label":"JavaScript Operator","x":352,"y":12,"height":80,"width":120,"extensible":true,"config":{"script":"$.setPortCallback(\"input\",onInput);\n\nfunction onInput(ctx,s) {\n    //$.output(s);\n\n    try {\n        var r = JSON.parse(s);\n    } catch(e) {\n        // fail silently on invalid JSON string\n        return;\n    }\n    if(!r.Success)\n        return;\n    if(r.Data === null)\n        return;\n    \n    var out = \"\";\n    for(var i = 0; i < r.Data.length; ++i) {\n        \n      //  if(i === 0)\n      //    out += \"speed, battery, rank, user, timest, id\\n\" ;\n            \n        var row = r.Data[i];\n        for(var col in row){\n         if(row[col] === 'null')\n           row[col] = 0\n            \n        }    \n        \n        var name_race = new String(row['value.user']);\n        name_race = name_race.replace(/\"/g,\"\");\n        \n        name_race = name_race.replace(/controller/g,\"Monaco\");\n        name_race = name_race.replace(/Test2/g,\"Toronto\");\n        name_race = name_race.replace(/AI Driver/g,\"Texas\");\n        name_race = name_race.replace(/Destroyer/g,\"Texas\");\n        name_race = name_race.replace(/Timo/g,\"Texas\");\n        name_race = name_race.replace(/S/g,\"Toronto\");\n        name_race = name_race.replace(/TEST/g,\"Toronto\");\n        name_race = name_race.replace(/Test/g,\"Toronto\");\n        name_race = name_race.replace(/0/g,\"Toronto\");\n        name_race = name_race.replace(/F/g,\"Toronto\");\n        name_race = name_race.replace(/G/g,\"Toronto\");\n        name_race = name_race.replace(/hgfd/g,\"Toronto\");\n        name_race = name_race.replace(/SAPSKULL/g,\"Toronto\");\n        name_race = name_race.replace(/Erik/g,\"Monaco\");\n        name_race = name_race.replace(/Gerald/g,\"Monaco\");\n        name_race = name_race.replace(/Schuhmacher/g,\"Texas\");\n        name_race = name_race.replace(/Green Hornet/g,\"Texas\");\n        name_race = name_race.replace(/Flo/g,\"Texas\");\n        name_race = name_race.replace(/Markus/g,\"Monaco\");\n        name_race = name_race.replace(/sandro/g,\"Monaco\");\n        \n        \n\n        \n        var mac = new String(row['value.id']);\n        mac = mac.replace(/\"/g,\"\");\n        mac = mac.replace(\" \",'');\n\n        var timest = new String( row['_MessageGateway_TimeISO8601']);\n        timest = timest.replace(/\"/g,\"\");\n        \n        \n            out += row['value.speed'] + \", \" +row['value.battery'] +\", \"+row['value.rank'] +\", \"+name_race +\", \"+timest +\",\"+mac ;\n        out += \"\\n\";\n    }\n    $.output(out);\n    \n}"}}},"hdfsproducer1":{"component":"com.sap.storage.hdfs.producer","metadata":{"label":"HDFS Producer","x":703.9999990463257,"y":12,"height":80,"width":120,"config":{"path":"/car_telemetrydata_solution/CarTelemetryStructuredDataExtract.csv","hadoopNamenode":"spark-hdfs-adapter:8020","append":false}}},"tomessageconverter1":{"component":"com.sap.util.toMessageConverter","metadata":{"label":"ToMessage Converter","x":535.9999990463257,"y":12,"height":80,"width":120,"config":{}}},"graphterminator1":{"component":"com.sap.util.graphTerminator","metadata":{"label":"Graph Terminator","x":871.9999990463257,"y":12,"height":80,"width":120,"config":{}}}},"groups":[],"connections":[{"metadata":{"points":"659.9999990463257,52 699.9999990463257,52"},"src":{"port":"out","process":"tomessageconverter1"},"tgt":{"port":"inFile","process":"hdfsproducer1"}},{"metadata":{"points":"827.9999990463257,52 867.9999990463257,52"},"src":{"port":"outFilename","process":"hdfsproducer1"},"tgt":{"port":"stop","process":"graphterminator1"}},{"metadata":{"points":"476,52 503.99999952316284,52 503.99999952316284,43 531.9999990463257,43"},"src":{"port":"output","process":"javascriptoperator2"},"tgt":{"port":"inbody","process":"tomessageconverter1"}},{"metadata":{"points":"140,52 180,52"},"src":{"port":"out","process":"constantgenerator1"},"tgt":{"port":"insql","process":"sapvoraclient1"}},{"metadata":{"points":"308,52 348,52"},"src":{"port":"outresult","process":"sapvoraclient1"},"tgt":{"port":"input","process":"javascriptoperator2"}}],"inports":{},"outports":{}}