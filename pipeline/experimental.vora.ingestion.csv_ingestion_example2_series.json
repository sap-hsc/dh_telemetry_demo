{"properties":{},"description":"CSV Ingest2 Timeseries","processes":{"voraingestor1":{"component":"com.sap.vora.ingestor","metadata":{"label":"Vora Ingestor","x":753,"y":380,"height":80,"width":120,"config":{"dsn":"v2://demo_tc:15000/?binary=true","engineType":"SERIES","partitionKeyRegex":"code|ts","partitioningCriterion":"CREATE PARTITION FUNCTION pf8(col1 VARCHAR(*), col2 TIMESTAMP) AS HASH ( col1 ) MIN PARTITIONS 4 MAX PARTITIONS 4 INTERVAL ( col2 ) '10' MINUTE;","databaseSchema":"TEST"}}},"avropreingestor1":{"component":"com.sap.vora.preingestor","metadata":{"label":"Avro PreIngestor","x":544,"y":380,"height":80,"width":120,"config":{"format":"csv","defaultAvroSchema":"{   \"type\": \"record\",   \"name\": \"timeseries_demo_record\",   \"fields\": [     { \"name\": \"idx\", \"type\": \"int\"},     { \"name\": \"code\", \"type\": \"string\"},     { \"name\": \"magnitude\", \"type\": \"double\"},     { \"name\": \"ts\", \"type\": \"long\", \"logicalType\": \"timestamp-millis\"}   ] }"}}},"terminal1":{"component":"com.sap.util.terminal","metadata":{"label":"Terminal","x":540,"y":506,"height":80,"width":120,"ui":"dynpath","config":{}}},"tostringconverter1":{"component":"com.sap.util.toStringConverter","metadata":{"label":"ToString Converter","x":381,"y":506,"height":80,"width":120,"config":{}}},"datagenerator1":{"component":"com.sap.util.dataGenerator","metadata":{"label":"Data Generator","x":337,"y":380,"height":80,"width":120,"extensible":true,"config":{"script":"// This operator is needed to keep compatibility to the old datagenerator\nvar counter = 0;\n\ngetRandom = function(min, max) {\n    return Math.random() * (max - min) + min;\n}\n\ngetRandomBool = function() {\n    return Math.random() >= 0.5;\n}\ngetRandomInt = function(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\ngetRandomTimestamp = function(){\n   var d = new Date()\n   return d.toJSON().slice(0,10) + \" \" +d.toJSON().slice(12,23);\n\n}\n\ngetRandomString = function(minlen, maxlen) {\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    len = getRandomInt(minlen, maxlen)\n    for(var i = 0; i < len; i++) {\n        text += possible.charAt(Math.floor(Math.random() *possible.length));   \n    }\n    return text;\n}\n\ngenerateData = function() {\n\n    // payload = \"3005,dbksh,7622.89732,2017-08-22 17:05:49.96\"\n    var payload = getRandomInt(0, 10000) + \",\"; // idx\n    payload += getRandomString(5, 5) + \",\"; // code\n    payload += getRandom(0, 10000) + \",\"; // magnitude\n    payload += getRandomTimestamp() + \"\\n\"; // ts    \n    \n    return payload;\n}\n\n$.addTimer(\"500ms\",doTick);\n\nfunction doTick(ctx) {\n    var msg = {};\n    msg.Attributes = {\"message.commit.token\": \"commit-\" + counter};\n    msg.Body = generateData();\n    $.output(msg);\n    counter++;\n}\n"}}}},"groups":[],"connections":[{"metadata":{"points":"668,420 749,420"},"src":{"port":"out","process":"avropreingestor1"},"tgt":{"port":"in","process":"voraingestor1"}},{"metadata":{"points":"505,546 536,546"},"src":{"port":"outstring","process":"tostringconverter1"},"tgt":{"port":"in1","process":"terminal1"}},{"metadata":{"points":"877,420 927,420 927,487.5 327,487.5 327,555 377,555"},"src":{"port":"out","process":"voraingestor1"},"tgt":{"port":"inmessage","process":"tostringconverter1"}},{"metadata":{"points":"461,420 540,420"},"src":{"port":"output","process":"datagenerator1"},"tgt":{"port":"in","process":"avropreingestor1"}}],"inports":{},"outports":{}}